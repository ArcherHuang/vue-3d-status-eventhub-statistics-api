(function(){var t={52630:function(t,e,a){"use strict";var n=a(73513),i=a(49242),s=a(73396);function r(t,e,a,n,i,r){const o=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(o)}var o=a(15941);const c=a(97218),{EventHubConsumerClient:d}=a(17294);var l={data(){return{queryADT:"https://adt3dquery.ashyriver-e2c40e3c.japaneast.azurecontainerapps.io/adt/query/statistics"}},components:{},created(){this.receiveEventHubData()},mounted(){},methods:{async receiveEventHubData(){const t="Endpoint=sb://iothub-ns-adt-3d-24613603-b45c1d4b80.servicebus.windows.net/;SharedAccessKeyName=iothubowner;SharedAccessKey=jl8sv+mgHmKgLzKfkNbrBnIrj6+p+jrx2g+8pWRyeyo=;EntityPath=adt-3d",e="adt-3d",a="forwebazure-status-eventhub-statistics-api";o.log(`connectionString: ${t}`),o.log(`eventHubName: ${e}`),o.log(`consumerGroup: ${a}`);const n=new d(a,t,e);this.subscription=n.subscribe({processEvents:async(t,e)=>{if(o.log(`\nevents: ${JSON.stringify(t)}`),t[0]["body"].hasOwnProperty("status")){o.log(`type: ${t[0].body.status.type}`);let e=-1;"error"===t[0].body.status.type?e=2:"inOperation"===t[0].body.status.type?e=1:"idle"===t[0].body.status.type&&(e=0),this.$store.commit("setMachineStatus",{status:e})}t[0]["body"].hasOwnProperty("statistics")&&c.get(this.queryADT).then((t=>{o.log(`response_data_api: ${JSON.stringify(t.data)}`),this.$store.commit("setMachineStatistics",{standardDeviation:t.data.statisticsStandardDeviation,average:t.data.statisticsAverage,uniformity:t.data.statisticsUniformity,max:t.data.statisticsMax,min:t.data.statisticsMin,maxMin:t.data.statisticsMaxMin})})).catch((t=>o.log(t))),await e.updateCheckpoint(t[t.length-1])}})}}},u=a(40089);const h=(0,u.Z)(l,[["render",r]]);var v=h,m=a(22483),g=a(87139);const f=t=>((0,s.dD)("data-v-0b7010c4"),t=t(),(0,s.Cn)(),t),p=f((()=>(0,s._)("div",{class:"title"}," 12 吋晶圓膜厚機 - 狀態資訊 ",-1))),y={key:0,class:"badge badge-secondary device-status"},b={key:1,class:"badge badge-success device-status"},_={key:2,class:"badge badge-warning device-status"},w={key:3,class:"badge badge-danger device-status"},C=f((()=>(0,s._)("div",{class:"title"}," 12 吋晶圓膜厚機 - 統計資訊 ",-1))),x={class:"card"},S=f((()=>(0,s._)("span",{class:"card-title"},"Standard Deviation",-1))),k={class:"card-text"},D=f((()=>(0,s._)("span",null,"Å",-1))),M={class:"card"},$=f((()=>(0,s._)("span",{class:"card-title"},"Average",-1))),T={class:"card-text"},O=f((()=>(0,s._)("span",null,"Å",-1))),L={class:"card"},j=f((()=>(0,s._)("span",{class:"card-title"},"Uniformity",-1))),z={class:"card-text"},A=f((()=>(0,s._)("span",null,"Å",-1))),E={class:"card"},P=f((()=>(0,s._)("span",{class:"card-title"},"Max",-1))),U={class:"card-text"},K=f((()=>(0,s._)("span",null,"Å",-1))),N={class:"card"},H=f((()=>(0,s._)("span",{class:"card-title"},"Min",-1))),q={class:"card-text"},W=f((()=>(0,s._)("span",null,"Å",-1))),B={class:"card"},Z=f((()=>(0,s._)("span",{class:"card-title"},"Max - Min",-1))),I={class:"card-text"},J=f((()=>(0,s._)("span",null,"Å",-1))),R={id:"renderCanvas",ref:"renderCanvas"};function F(t,e,a,n,r,o){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",{class:(0,g.C_)(["list",{collapsed:r.isActive}])},[(0,s._)("div",{id:"status",onClick:e[0]||(e[0]=(...t)=>o.handleClick&&o.handleClick(...t)),onKeyup:e[1]||(e[1]=(0,i.D2)(((...t)=>o.handleClick&&o.handleClick(...t)),["enter"]))},[p,(0,s._)("div",null,[(0,s.Uk)(" 目前機台 "),-1==t.machineStatus?((0,s.wg)(),(0,s.iD)("span",y," 關機中 ")):0==t.machineStatus?((0,s.wg)(),(0,s.iD)("span",b," 閒置中 ")):1==t.machineStatus?((0,s.wg)(),(0,s.iD)("span",_," 運作中 ")):2==t.machineStatus?((0,s.wg)(),(0,s.iD)("span",w," 發生問題 ")):(0,s.kq)("",!0)])],32),(0,s._)("div",{id:"statistics",onClick:e[2]||(e[2]=(...t)=>o.handleClick&&o.handleClick(...t)),onKeyup:e[3]||(e[3]=(0,i.D2)(((...t)=>o.handleClick&&o.handleClick(...t)),["enter"]))},[C,(0,s._)("div",x,[S,(0,s._)("p",k,[(0,s.Uk)((0,g.zw)(t.standardDeviation)+" ",1),D])]),(0,s._)("div",M,[$,(0,s._)("p",T,[(0,s.Uk)((0,g.zw)(t.average)+" ",1),O])]),(0,s._)("div",L,[j,(0,s._)("p",z,[(0,s.Uk)((0,g.zw)(t.uniformity)+" ",1),A])]),(0,s._)("div",E,[P,(0,s._)("p",U,[(0,s.Uk)((0,g.zw)(t.max)+" ",1),K])]),(0,s._)("div",N,[H,(0,s._)("p",q,[(0,s.Uk)((0,g.zw)(t.min)+" ",1),W])]),(0,s._)("div",B,[Z,(0,s._)("p",I,[(0,s.Uk)((0,g.zw)(t.maxMin)+" ",1),J])])],32)],2),(0,s._)("canvas",R,null,512)])}var G=a(20065),V=(a(53279),a(41617)),Y=a(15941),Q={name:"BabylonScene",data(){return{isActive:!1,refScene:null}},computed:{...(0,G.rn)(["machineStatus","standardDeviation","average","uniformity","max","min","maxMin"]),status(){return this.$store.state.machineStatus}},watch:{machineStatus:{deep:!0,handler(t){Y.log(`The machine status has changed: ${t}`),this.setTricolorLight(t)}}},mounted(){const t=this.$refs.renderCanvas;if(t.width=window.innerWidth,t.height=window.innerHeight,t){const e=new V.D4V(t),a=new V.xsS(e);this.refScene=a,a.clearColor=new V.Wot(192,221,255);new V.YfP("Camera",0,.8,10,V.Pa4.Zero(),a);V.n0n.Append("assets/","semi-v1.glb",a,(()=>{a.activeCamera=null,a.createDefaultCameraOrLight(!0),a.createDefaultEnvironment(),a.activeCamera.attachControl(t,!1)})),e.runRenderLoop((()=>{a.render()})),window.addEventListener("resize",(()=>{e.resize()}))}},methods:{handleClick(){Y.log("點擊了 div"),this.isActive=!this.isActive},initTricolorLight(t="",e=1,a=1,n=1){Y.log(`initTricolorLight__meshName: ${t}`),Y.log(`initTricolorLight__r: ${e}`),Y.log(`initTricolorLight__g: ${a}`),Y.log(`initTricolorLight__b: ${n}`);const i=["Cylinder.022","Cylinder.020","Cylinder.018"];if(i.forEach((t=>{const e=new V.KuD(this.refScene);e.alpha=1,e.diffuseColor=new V.Wot(1,1,1),this.refScene.getMeshByName(t).material=e})),""!==t){const i=new V.KuD(this.refScene);i.alpha=1,i.diffuseColor=new V.Wot(e,a,n),this.refScene.getMeshByName(t).material=i}},setTricolorLight(t){Y.log(`setTricolorLight__status: ${t}`),2===t?this.initTricolorLight("Cylinder.022",1,0,0):1===t?this.initTricolorLight("Cylinder.020",1,.57,0):0===t?this.initTricolorLight("Cylinder.018",0,1,0):this.initTricolorLight("",1,1,1)}}};const X=(0,u.Z)(Q,[["render",F],["__scopeId","data-v-0b7010c4"]]);var tt=X;const et=[{path:"/",name:"home",component:tt}],at=(0,m.p7)({history:(0,m.r5)(),routes:et});var nt=at,it=a(15941),st=(0,G.MT)({state:{machineStatus:-1,standardDeviation:0,average:0,uniformity:0,max:0,min:0,maxMin:0},getters:{},mutations:{setMachineStatus(t,e){t.machineStatus=e.status,it.log(`machine.status: ${e.status}`)},setMachineStatistics(t,e){t.standardDeviation=e.standardDeviation,t.average=e.average,t.uniformity=e.uniformity,t.max=e.max,t.min=e.min,t.maxMin=e.maxMin,it.log(`machine.standardDeviation: ${e.standardDeviation}`),it.log(`machine.average: ${e.average}`),it.log(`machine.uniformity: ${e.uniformity}`),it.log(`machine.max: ${e.max}`),it.log(`machine.min: ${e.min}`),it.log(`machine.maxMin: ${e.maxMin}`)}},actions:{},modules:{}});a(48052);(0,i.ri)(v).use(n.ZP),(0,i.ri)(v).use(st).use(nt).mount("#app")},25868:function(){},80090:function(){},5041:function(){}},e={};function a(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(s.exports,s,s.exports,a),s.loaded=!0,s.exports}a.m=t,function(){var t=[];a.O=function(e,n,i,s){if(!n){var r=1/0;for(l=0;l<t.length;l++){n=t[l][0],i=t[l][1],s=t[l][2];for(var o=!0,c=0;c<n.length;c++)(!1&s||r>=s)&&Object.keys(a.O).every((function(t){return a.O[t](n[c])}))?n.splice(c--,1):(o=!1,s<r&&(r=s));if(o){t.splice(l--,1);var d=i();void 0!==d&&(e=d)}}return e}s=s||0;for(var l=t.length;l>0&&t[l-1][2]>s;l--)t[l]=t[l-1];t[l]=[n,i,s]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var i,s,r=n[0],o=n[1],c=n[2],d=0;if(r.some((function(e){return 0!==t[e]}))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(c)var l=c(a)}for(e&&e(n);d<r.length;d++)s=r[d],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(l)},n=self["webpackChunkvue_d3_blender"]=self["webpackChunkvue_d3_blender"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(52630)}));n=a.O(n)})();
//# sourceMappingURL=app.890a6c84.js.map